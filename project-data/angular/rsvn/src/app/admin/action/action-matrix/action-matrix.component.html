<div *ngIf="!loaded">
  <img src="/assets/img/loader.gif">
</div>
<div class="d-flex" *ngIf="loaded">
  <div style="width:20%; height:700px;background-color:skyblue;overflow-y:scroll">

    <app-action-matrix-sidebar [data]='sidebarData'></app-action-matrix-sidebar>

  </div>
  <div style="width:80% ;height:700px;overflow-y:scroll;background-color:rgb(173, 173, 173)">
    <div *ngFor="let item of dispList">
      <h4>{{item.bldg.name}}</h4>
      <div class="d-flex flex-wrap">
        <div *ngFor="let rms of item.rooms">
          <div class="grid_button">
            <div class="d-flex">
              <div class="form-control">
                <button class='check-button'>{{ rms.number }}</button></div>
              <div class="form-control">
                <div *ngIf="rms.active" class="d-flex">
                  <div *ngFor="let act of rms.active " >
                    <button class="check-button" *ngIf="act && act.active == 'checkout'" (click)='layout(act)'> 
                      <img src="/assets/img/check-red.png" height="20px"></button>
                    <button class="check-button" *ngIf="act && act.active == 'checkin'" (click)='layout(act)'>
                      <img  src="/assets/img/check-green.png" height="20px"></button>
                    <button class="check-button" *ngIf="act && act.active == 'inhouse'" (click)='layout(act)'>
                      <img src="/assets/img/house.png" height='20px'></button>
                  </div>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="form-control {{rms.status}}" [matMenuTriggerFor]="roomMenu">{{ rms.status}}</div>
              <div class="form-control ">    </div>
            </div>

            <mat-menu  #roomMenu="matMenu">
              <div class="menu-head">Room Status Override</div>
              <button *ngFor="let rs of roomStatus"  mat-menu-item
                (click)="roomStatusChange(rms.id,rs.value)">{{ rs.display}} </button>
            </mat-menu>
            <div style="background-color:rgb(194, 208, 223);color:black;height:1.6em">
              <span style="font-size:small;margin:0 1em" (click)='layout(x)'title="{{x|json}}" *ngFor="let x of rms.action">
                {{ x.staff.last_name | slice :0:6 }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>


</div>